// Project tasks configuration. See https://zed.dev/docs/tasks for documentation.
//
[
  {
    "label": "app-service run",
    "command": "cargo watch -q -c -w src/ -w assets/ -w templates/ -x run",
    "cwd": "$ZED_WORKTREE_ROOT/app-service"
  },
  {
    "label": "auth-service run",
    "command": "cargo watch -q -c -w src/ -w assets/ -x run",
    "cwd": "$ZED_WORKTREE_ROOT/auth-service"
  },
  {
    "label": "db run",
    "command": "docker run --rm --name ps-db -e POSTGRES_PASSWORD=auth-svc-password -p 5432:5432 -v lgr-live-bootcamp-project_db:/var/lib/postgresql/data postgres:15.2-alpine",
    "cwd": "$ZED_WORKTREE_ROOT/auth-service"
  },
  {
    "label": "redis run",
    "command": "docker run --rm --name ps-redis -p 6379:6379 redis:7.0-alpine",
    "cwd": "$ZED_WORKTREE_ROOT/auth-service"
  },
  {
    "label": "cargo clippy fix",
    "command": "cargo clippy --fix --allow-dirty"
  },
  {
    "label": "docker compose build",
    "command": "docker compose build",
    "cwd": "$ZED_WORKTREE_ROOT"
  },
  {
    "label": "docker compose up",
    "command": "docker compose up",
    "cwd": "$ZED_WORKTREE_ROOT"
  },
  {
    "label": "docker compose down",
    "command": "docker compose down",
    "cwd": "$ZED_WORKTREE_ROOT"
  },
  {
    "label": "cargo nextest $ZED_STEM::$ZED_CUSTOM_RUST_TEST_NAME",
    "command": "cargo nextest run $ZED_STEM::$ZED_CUSTOM_RUST_TEST_NAME",
    "tags": ["rust-test"]
  },
  {
    "label": "cargo nextest $ZED_STEM (package: $ZED_CUSTOM_RUST_PACKAGE)",
    "command": "cargo nextest run -p $ZED_CUSTOM_RUST_PACKAGE $ZED_STEM::$ZED_SYMBOL",
    "tags": ["rust-mod-test"]
  },
  {
    "label": "cargo nextest run",
    "command": "cargo nextest run"
  }
]
